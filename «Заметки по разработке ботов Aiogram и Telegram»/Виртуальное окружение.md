В процессе работы программистам часто приходится иметь дело с несколькими проектами, в которых могут быть разные зависимости, то есть библиотеки, чтобы работали библиотеки, чтобы работали библиотеки :) Это, конечно, шутка, но лишь частично. Довольно распространенный пример - это проекты на python2 и python3. Интерпретаторы не имеют совместимости и то, что написано на Python3, скорее всего, не будет работать на Python2 и наоборот. 

Представьте, если бы вам пришлось делать проект, где используется какая-нибудь старая версия библиотеки, не совместимая с текущей версией. Чтобы нормально запустить такой проект - пришлось бы удалить новую библиотеку, поставить старую, поработать с проектом... А если вам нужно параллельно что-то подправить в новом проекте с новой библиотекой? Что, при переключении между проектами одни версии библиотек сносить, а другие ставить? А если таких библиотек много?

А если нам надо развернуть наш проект где-то в другом месте - на сервере, например, как понять какие библиотеки устанавливать для этого проекта? А если там уже запущены и постоянно работают проекты на Python со своими зависимостями, которые не совместимы с зависимостями вашего проекта?

К счастью, есть механизм развести проекты друг от друга, чтобы каждый был в какой-то мере изолирован и имел те версии библиотек и интерпретатора, которые требуются именно ему. Для каждого отдельного проекта рекомендуется создавать так называемое виртуальное окружение. И сделать это можно средствами самого Python. То есть, нужно на компьютере создать папку, где будет находиться ваш проект, затем открыть эту папку в VS Code (не обязательно в VS Code, конечно, можно в любом другом редакторе кода, из которого можно запустить терминал, либо просто в любом терминале с командной строкой, это просто в рамках нашего сетапа мы используем VS Code) и там же в VS Code в терминале, находясь в папке проекта, создать для проекта виртуальное окружение, выполнив команду:

python3.11 -m venv venv
Здесь флаг -m говорит интерпретатору запустить инструмент создания виртуального окружения venv как исполняемый модуль, а второй venv - название папки, в которую будет установлено виртуальное окружение. Оно может быть любым другим, но обычно принято называть его либо venv, либо env, от английского - virtual environment или просто environment.

Если все прошло успешно, вы увидите, что в рабочей папке с проектом появилась новая директория venv.



Примечание. Для Windows, если вы при установке интерпретатора Python, добавляли его в PATH, команда создания виртуального окружения будет такая:

python -m venv venv

Запуск и работа в виртуальном окружении
После того, как мы создали виртуальное окружение - его необходимо запустить (активировать), чтобы все библиотеки, которые дополнительно нужно будет устанавливать для проекта, ставились именно в виртуальное окружение, а не глобально. Запуск на macOS и Ubuntu немного отличается от запуска на Windows.

На macOS и Ubuntu виртуальное окружение активируется командой:

source venv/bin/activate
После ее выполнения, вы должны увидеть название вашего виртуального окружения в скобках, перед приглашением ко вводу команд в командную строку:

Air-Mihail:Python mikhail$ source venv/bin/activate
(venv) Air-Mihail:Python mikhail$ 
На Windows в командной строке терминала cmd нужно выполнить:

venv\Scripts\activate.bat
На Windows в командной строке терминала Power Shell:

venv\Scripts\activate.ps1
Если после выполнения команды на Windows ничего не произошло - то есть, перед приглашением к работе с командной строкой не появилось в скобках название виртуального окружения - переходите на следующий шаг - там инструкция, что с этим делать.

Если же виртуальное окружение запустилось, давайте убедимся, что устанавливаемые через менеджер пакетов pip библиотеки, действительно ставятся в виртуальное окружение, а не глобально. Выполните команду:

pip list
Вы должны получить список установленных пакетов, типа:

Package           Version
----------------- -------
flake8            5.0.4
mccabe            0.7.0
mypy              0.982
mypy-extensions   0.4.3
pip               22.3
pycodestyle       2.9.1
pyflakes          2.5.0
setuptools        65.5.0
typing_extensions 4.4.0
Теперь давайте поставим, например, библиотеку numpy, которая очень часто используется в статистике, аналитике, машинном обучении и еще много-много где, где требуется работа с матрицами.

pip install numpy
После установки давайте снова вызовем команду:

pip list
И убедимся, что библиотека numpy присутствует в виртуальном окружении:

Package           Version
----------------- -------
flake8            5.0.4
mccabe            0.7.0
mypy              0.982
mypy-extensions   0.4.3
numpy             1.23.4
pip               22.3
pycodestyle       2.9.1
pyflakes          2.5.0
setuptools        65.5.0
typing_extensions 4.4.0
А теперь нужно выйти из виртуального окружения. Делается это вводом команды:

deactivate
После ее выполнения название виртуального окружения в скобках пропадет из командной строки. А, значит, теперь мы находимся в глобальном окружении. И если теперь ввести команду, чтобы посмотреть на список установленных библиотек (команда pip list), то увидим, что он отличается, и библиотека numpy не установлена. Если, конечно, до этого вы ее не ставили глобально сами.

Air-Mihail:Python mikhail$ pip list
Package    Version
---------- -------
asyncio    3.4.3
pip        22.3
pygame     2.1.2
scipy      1.9.3
setuptools 65.4.1
wheel      0.37.1
Air-Mihail:Python mikhail$
Итак, на всякий случай еще раз повторю. Активация виртуального окружения для macOS и Ubuntu происходит после выполнения команды:

source venv/bin/activate
Для Windows (cmd):

venv\Scripts\activate.bat
Для Windows (PowerShell):

venv\Scripts\activate.ps1
Выход из виртуального окружения - команда:

deactivate